import{f as J,r as I,h as _,s as M,c as u,a as e,q as b,b as l,w as v,Q as j,S as k,T as y,t as a,W as R,o as d,V as Q,d as N,X as W,R as h,n as X,aq as G,e as H}from"./Dzi8umfP.js";import{_ as K}from"./B2sCsmog.js";import{$ as A,a as w,b as $}from"./D6ATwwEs.js";import{D as Y}from"./CR7Q8EfN.js";import{u as Z}from"./4z8zRpvv.js";import"./BsYNtWxF.js";const ee={class:"min-h-screen p-4 md:p-8"},te={class:"max-w-6xl mx-auto"},re={key:0,class:"flex flex-col items-center justify-center py-20"},se={class:"relative"},oe={key:1,class:"text-center py-20"},ae={class:"w-24 h-24 bg-gradient-to-br from-amber-100 to-orange-100 rounded-full flex items-center justify-center mx-auto mb-6"},ne={key:2,class:"space-y-6"},ie={key:0,class:"relative overflow-hidden rounded-2xl ring-2 ring-red-500/80 bg-red-500/20 backdrop-blur-md p-6 text-white shadow-xl"},le={class:"relative"},de={class:"flex items-center gap-3 mb-3"},ce={class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center"},ue={class:"grid gap-2"},me={class:"flex-1"},be={class:"font-medium"},xe={class:"text-sm opacity-90"},ge={class:"text-sm font-medium"},fe={class:"flex items-center justify-between mb-6"},pe={class:"text-xl md:text-2xl font-bold text-neutral-800 dark:text-neutral-200"},he={class:"flex gap-2"},_e={class:"relative space-y-4 mb-6 px-6 overflow-y-auto [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-neutral-100/50 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-amber-300/70 dark:[&::-webkit-scrollbar-track]:bg-neutral-700/50 dark:[&::-webkit-scrollbar-thumb]:bg-amber-500/70"},ve={class:"flex items-center gap-4 mb-3"},ke={class:"text-xs"},ye={class:"font-bold"},we={class:"hidden md:block text-sm text-neutral-500"},$e={class:"md:hidden block shrink-0 text-sm text-neutral-500"},Ue={class:"md:ml-16 space-y-2"},De={key:0,class:"text-neutral-400 dark:text-neutral-600 text-sm italic py-2"},je={class:"relative"},Ae={class:"flex-1 min-w-0"},Ee={class:"flex items-center gap-2 mb-1"},Ce={class:"font-medium text-neutral-800 dark:text-neutral-200 truncate"},Ne={class:"text-sm text-neutral-600 dark:text-neutral-400 truncate"},Se={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ve={class:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/50 dark:to-indigo-950/50 rounded-2xl p-6 border border-blue-200/50 dark:border-blue-800/50"},ze={class:"flex items-center gap-4"},Pe={class:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center"},Be={class:"text-2xl font-bold text-blue-800 dark:text-blue-300"},Le={class:"text-sm text-blue-600 dark:text-blue-400"},Oe={class:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/50 dark:to-orange-950/50 rounded-2xl p-6 border border-amber-200/50 dark:border-amber-800/50"},qe={class:"flex items-center gap-4"},Te={class:"w-12 h-12 bg-amber-500 rounded-xl flex items-center justify-center"},Fe={class:"text-2xl font-bold text-amber-800 dark:text-amber-300"},Je={class:"bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-950/50 dark:to-pink-950/50 rounded-2xl p-6 border border-red-200/50 dark:border-red-800/50"},Ie={class:"flex items-center gap-4"},Me={class:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center"},Re={class:"text-2xl font-bold text-red-800 dark:text-red-300"},Qe={class:"text-sm text-red-600 dark:text-red-400"},We={class:"bg-white dark:bg-neutral-900 rounded-2xl p-6 shadow-sm border border-neutral-200 dark:border-neutral-800"},Xe={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Ge={class:"relative mb-3"},He={class:"text-center"},Ke={class:"font-medium text-neutral-800 dark:text-neutral-200 group-hover:text-amber-600 transition-colors"},Ye={class:"text-xs text-neutral-500 mt-1"},nt=J({__name:"calendar",setup(Ze){const f=Z(),p=I("week"),E=[{label:"7j",value:"week",fullLabel:"Prochains 7 jours"},{label:"30j",value:"month",fullLabel:"Prochains 30 jours"},{label:"Tout",value:"all",fullLabel:"Tout"}],S=_(()=>{var r;return(r=E.find(s=>s.value===p.value))==null?void 0:r.fullLabel});M(async()=>{f.animals.length||await f.fetchAnimals()});const U=_(()=>{var i,c,m;const r=[],s=A(w());for(const n of f.animals){if((i=n.fleaProtection)!=null&&i.end)try{const t=$(n.fleaProtection.end),o=t.compare(s);r.push({id:`flea-${n.id}`,date:t,animal:n,type:"flea-protection",title:"Anti-puces",description:"Protection anti-puces expire",icon:"i-heroicons-bug-ant",isOverdue:o<0,isUrgent:o>=0&&o<=3,isUpcoming:o>3&&o<=14,status:o<0?"Expiré":o===0?"Aujourd'hui":`J-${o}`,priority:o<0?1:o<=3?2:3,sortValue:o})}catch(t){console.error("Error processing flea date:",t)}if((c=n.wormProtection)!=null&&c.end)try{const t=$(n.wormProtection.end),o=t.compare(s);r.push({id:`worm-${n.id}`,date:t,animal:n,type:"worm-protection",title:"Vermifuge",description:"Protection vermifuge expire",icon:"i-fluent-emoji-high-contrast-worm",isOverdue:o<0,isUrgent:o>=0&&o<=3,isUpcoming:o>3&&o<=14,status:o<0?"Expiré":o===0?"Aujourd'hui":`J-${o}`,priority:o<0?1:o<=3?2:3,sortValue:o})}catch(t){console.error("Error processing worm date:",t)}const x=(m=n.food)==null?void 0:m.find(t=>t.state==="open");if(x)try{const t=Math.floor(x.weight*1e3/n.mealQuantity),o=$(x.openDate).add({days:t}),g=o.compare(s);r.push({id:`food-${n.id}`,date:o,animal:n,type:"food",title:"Croquettes",description:"Stock de croquettes épuisé",icon:"i-tabler-dog-bowl",isOverdue:g<0,isUrgent:g>=0&&g<=2,isUpcoming:g>2&&g<=7,status:g<0?"Épuisé":g===0?"Aujourd'hui":`J-${g}`,priority:g<0?1:g<=2?2:3,sortValue:g})}catch(t){console.error("Error processing food date:",t)}}return r.sort((n,x)=>n.priority!==x.priority?n.priority-x.priority:n.date.compare(x.date))}),V=_(()=>{const r=A(w()),s=[],i=p.value==="week"?7:p.value==="month"?30:90;for(let c=0;c<i;c++){const m=r.add({days:c}),n=U.value.filter(x=>x.date.compare(m)===0);s.push({date:m.toString(),dayName:P(m),dayNumber:m.day,isToday:c===0,events:n})}return s}),D=_(()=>U.value.filter(r=>r.isOverdue||r.isUrgent)),z=_(()=>U.value.filter(r=>r.isUpcoming||r.isUrgent).length),P=r=>r.toDate(w()).toLocaleDateString("fr-FR",{weekday:"short"}),B=r=>G($(r).toDate(w()).toLocaleDateString("fr-FR",{month:"long",day:void 0,year:void 0})),L=r=>{if(!r)return"N/A";const s=$(r),i=A(w()),c=i.year-s.year,m=i.month-s.month;return c>1?`${c} ans`:c===1?"1 an":m>1?`${m} mois`:"Bébé"},C=r=>U.value.find(s=>s.animal.id===r.id),O=r=>{const s=C(r);return s?s.isOverdue?"bg-red-500":s.isUrgent?"bg-orange-500":"bg-yellow-500":"bg-green-500"},q=r=>r.isOverdue?"bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800/50":r.isUrgent?"bg-orange-50 dark:bg-orange-950/30 border border-orange-200 dark:border-orange-800/50":r.isUpcoming?"bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800/50":"bg-neutral-50 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700",T=r=>r.isOverdue?"bg-red-500 text-white":r.isUrgent?"bg-orange-500 text-white":r.isUpcoming?"bg-amber-500 text-white":"bg-neutral-500 text-white",F=r=>r.isOverdue?"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":r.isUrgent?"bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300":r.isUpcoming?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"bg-neutral-100 text-neutral-800 dark:bg-neutral-800 dark:text-neutral-300";return(r,s)=>{const i=Q,c=R,m=W,n=K,x=H;return d(),u("div",ee,[e("div",te,[s[9]||(s[9]=e("div",{class:"text-center mb-8"},[e("div",{class:"inline-flex items-center gap-3 mb-4"},[e("h1",{class:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent"}," Calendrier Intelligent ")]),e("p",{class:"text-neutral-600 dark:text-neutral-400 text-lg"}," Votre assistant personnel pour le bien-être de vos compagnons ")],-1)),b(f).loading?(d(),u("div",re,[e("div",se,[s[0]||(s[0]=e("div",{class:"w-16 h-16 border-4 border-amber-200 rounded-full animate-spin border-t-amber-500"},null,-1)),l(i,{name:"i-heroicons-heart",class:"absolute inset-0 m-auto text-amber-500 text-xl"})]),s[1]||(s[1]=e("p",{class:"mt-4 text-neutral-600 dark:text-neutral-400"},"Synchronisation en cours...",-1))])):b(f).animals.length?(d(),u("div",ne,[b(D).length?(d(),u("div",ie,[s[6]||(s[6]=e("div",{class:"absolute inset-0 bg-black/10"},null,-1)),e("div",le,[e("div",de,[e("div",ce,[l(i,{name:"i-heroicons-exclamation-triangle",class:"text-xl"})]),s[5]||(s[5]=e("h3",{class:"text-xl font-bold"},"Action requise",-1))]),e("div",ue,[(d(!0),u(k,null,y(b(D).slice(0,2),t=>(d(),u("div",{key:t.id,class:"flex items-center gap-3 bg-white/10 rounded-lg p-3"},[l(m,{src:t.animal.avatarDisplay,size:"sm"},null,8,["src"]),e("div",me,[e("div",be,a(t.animal.name),1),e("div",xe,a(t.description),1)]),e("div",ge,a(t.status),1)]))),128))])])])):j("",!0),l(Y,{class:"flex flex-col px-6 md:px-12 max-h-screen overflow-hidden"},{default:v(()=>[e("div",fe,[e("h2",pe,a(b(S)),1),e("div",he,[(d(),u(k,null,y(E,t=>l(c,{key:t.value,variant:b(p)===t.value?"link":"ghost",color:"neutral",class:h([b(p)===t.value?"text-amber-500! dark:text-amber-400!":"text-neutral-900! dark:text-neutral-100!"]),size:"sm",onClick:o=>p.value=t.value},{default:v(()=>[N(a(t.label),1)]),_:2},1032,["variant","class","onClick"])),64))])]),e("div",_e,[(d(!0),u(k,null,y(b(V),t=>(d(),u("div",{key:t.date,class:"relative group"},[e("div",ve,[e("div",{class:h(["flex-shrink-0 w-12 h-12 rounded-full flex flex-col items-center justify-center text-sm font-medium transition-all",t.isToday?"bg-amber-400 text-white shadow-lg":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400"])},[e("div",ke,a(t.dayName),1),e("div",ye,a(t.dayNumber),1)],2),l(n,{ui:{label:"text-lg font-medium"},label:t.dayNumber===1?B(t.date):void 0},null,8,["label"]),e("div",we,a(t.events.length)+" événement"+a(t.events.length!==1?"s":""),1),e("div",$e,a(t.events.length)+" event"+a(t.events.length!==1?"s":""),1)]),e("div",Ue,[t.events.length?j("",!0):(d(),u("div",De," Journée tranquille 🌿 ")),(d(!0),u(k,null,y(t.events,o=>(d(),u("div",{key:o.id,class:h(["flex items-center gap-2 md:gap-4 p-2 md:p-4 rounded-xl transition-all hover:shadow-md cursor-pointer group/event",q(o)])},[e("div",je,[l(m,{src:o.animal.avatarDisplay,size:"md"},null,8,["src"]),e("div",{class:h(["absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs",T(o)])},[l(i,{name:o.icon,class:"text-xs"},null,8,["name"])],2)]),e("div",Ae,[e("div",Ee,[e("h4",Ce,a(o.animal.name),1),e("div",{class:h(["px-2 py-1 rounded-full text-xs font-medium",F(o)])},a(o.status),3)]),e("p",Ne,a(o.description),1)]),l(c,{size:"sm",variant:"ghost",color:"gray",class:"opacity-0 group-hover/event:opacity-100 transition-opacity"},{default:v(()=>[l(i,{name:"i-heroicons-chevron-right"})]),_:1})],2))),128))])]))),128))])]),_:1}),e("div",Se,[e("div",Ve,[e("div",ze,[e("div",Pe,[l(i,{name:"i-fluent-animal-dog-16-regular",class:"text-2xl text-white"})]),e("div",null,[e("div",Be,a(b(f).animals.length),1),e("div",Le," Compagnon"+a(b(f).animals.length!==1?"s":""),1)])])]),e("div",Oe,[e("div",qe,[e("div",Te,[l(i,{name:"i-heroicons-calendar-days",class:"text-2xl text-white"})]),e("div",null,[e("div",Fe,a(b(z)),1),s[7]||(s[7]=e("div",{class:"text-sm text-amber-600 dark:text-amber-400"}," À venir ",-1))])])]),e("div",Je,[e("div",Ie,[e("div",Me,[l(i,{name:"i-heroicons-exclamation-triangle",class:"text-2xl text-white"})]),e("div",null,[e("div",Re,a(b(D).length),1),e("div",Qe," Urgent"+a(b(D).length!==1?"s":""),1)])])])]),e("div",We,[s[8]||(s[8]=e("h3",{class:"text-xl font-bold text-neutral-800 dark:text-neutral-200 mb-4"}," Vos compagnons ",-1)),e("div",Xe,[(d(!0),u(k,null,y(b(f).animals,t=>(d(),X(x,{key:t.id,to:`/${t.name}`,class:"group flex flex-col items-center p-4 rounded-xl hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-all"},{default:v(()=>[e("div",Ge,[l(m,{src:t.avatarDisplay,size:"xl"},null,8,["src"]),C(t)?(d(),u("div",{key:0,class:h(["absolute -top-1 -right-1 w-4 h-4 rounded-full border-2 border-white dark:border-neutral-900",O(t)])},null,2)):j("",!0)]),e("div",He,[e("div",Ke,a(t.name),1),e("div",Ye,a(t.weight)+"kg • "+a(L(t.birthDate)),1)])]),_:2},1032,["to"]))),128))])])])):(d(),u("div",oe,[e("div",ae,[l(i,{name:"i-fluent-animal-dog-16-regular",class:"text-4xl text-amber-600"})]),s[3]||(s[3]=e("h2",{class:"text-2xl font-bold text-neutral-800 dark:text-neutral-200 mb-3"}," Commencez votre aventure ",-1)),s[4]||(s[4]=e("p",{class:"text-neutral-600 dark:text-neutral-400 mb-6 max-w-md mx-auto"}," Ajoutez vos compagnons pour découvrir un calendrier intelligent qui s'adapte à leurs besoins ",-1)),l(c,{to:"/nouveau",size:"lg",color:"amber",class:"shadow-lg"},{default:v(()=>[l(i,{name:"i-heroicons-plus"}),s[2]||(s[2]=N(" Ajouter mon premier compagnon "))]),_:1})]))])])}}});export{nt as default};
